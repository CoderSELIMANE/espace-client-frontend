{"ast":null,"code":"import React,{useState}from'react';import documentService from'../services/documentService';import{useApp}from'../contexts/AppContext';import{getUserPermissions}from'../utils/permissions';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const DocumentUpload=_ref=>{let{onClose,onSuccess}=_ref;const[formData,setFormData]=useState({title:'',description:'',document_type:'other',file:null,is_public:true// Tous les documents sont publics par défaut\n});const[loading,setLoading]=useState(false);const[errors,setErrors]=useState({});const[dragActive,setDragActive]=useState(false);const{state,actions}=useApp();// Obtenir les permissions de l'utilisateur\nconst userPermissions=getUserPermissions(state.user);const documentTypes=[{value:'pdf',label:'PDF'},{value:'fiche',label:'Fiche'},{value:'image',label:'Image'},{value:'other',label:'Autre'}];// Fonction pour détecter automatiquement le type de fichier\nconst detectFileType=fileName=>{if(!fileName)return'other';const extension=fileName.toLowerCase().split('.').pop();// Types d'images\nif(['jpg','jpeg','png','gif','bmp','webp','svg','ico','tiff','tif'].includes(extension)){return'image';}// Types PDF\nif(extension==='pdf'){return'pdf';}// Types de fiche (documents texte, tableurs et présentations)\nif(['doc','docx','txt','rtf','odt','ppt','pptx','odp','xls','xlsx','csv','ods','xlsm','xlsb'].includes(extension)){return'fiche';}// Par défaut\nreturn'other';};const handleChange=e=>{const{name,value,files}=e.target;if(name==='file'){const file=files[0];const detectedType=detectFileType(file===null||file===void 0?void 0:file.name);setFormData({...formData,file:file,title:formData.title||(file?file.name.split('.')[0]:''),document_type:detectedType// Détection automatique du type\n});}else{setFormData({...formData,[name]:value});}// Effacer l'erreur du champ modifié\nif(errors[name]){setErrors({...errors,[name]:''});}};const handleDrag=e=>{e.preventDefault();e.stopPropagation();if(e.type==='dragenter'||e.type==='dragover'){setDragActive(true);}else if(e.type==='dragleave'){setDragActive(false);}};const handleDrop=e=>{e.preventDefault();e.stopPropagation();setDragActive(false);if(e.dataTransfer.files&&e.dataTransfer.files[0]){const file=e.dataTransfer.files[0];const detectedType=detectFileType(file.name);setFormData({...formData,file:file,title:formData.title||file.name.split('.')[0],document_type:detectedType// Détection automatique du type\n});}};const handleSubmit=async e=>{e.preventDefault();setLoading(true);setErrors({});if(!formData.file){setErrors({file:['Veuillez sélectionner un fichier']});setLoading(false);return;}try{const uploadData=new FormData();uploadData.append('title',formData.title);uploadData.append('description',formData.description);uploadData.append('document_type',formData.document_type);uploadData.append('file',formData.file);const response=await documentService.uploadDocument(uploadData);actions.showNotification('success','Document uploadé avec succès','Succès');onSuccess(response.document);}catch(err){setErrors(err);actions.showNotification('error','Erreur lors de l\\'upload du document','Erreur');}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"modal show d-block\",tabIndex:\"-1\",style:{backgroundColor:'rgba(0,0,0,0.5)'},children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog modal-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"modal-title\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus me-2\"}),\"Ajouter un document\"]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:onClose})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[errors.non_field_errors&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:errors.non_field_errors[0]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-file me-2\"}),\"Fichier *\"]}),/*#__PURE__*/_jsx(\"div\",{className:`border rounded p-4 text-center ${dragActive?'border-primary bg-light':'border-dashed'} ${errors.file?'border-danger':''}`,onDragEnter:handleDrag,onDragLeave:handleDrag,onDragOver:handleDrag,onDrop:handleDrop,children:formData.file?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-file-check fa-2x text-success mb-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:formData.file.name}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:documentService.formatFileSize(formData.file.size)})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-cloud-upload-alt fa-2x text-muted mb-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-2\",children:\"Glissez-d\\xE9posez votre fichier ici ou\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"form-control\",name:\"file\",onChange:handleChange,accept:\".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png,.gif\"})]})}),errors.file&&/*#__PURE__*/_jsx(\"div\",{className:\"text-danger small mt-1\",children:errors.file[0]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"title\",className:\"form-label\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-heading me-2\"}),\"Titre *\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:`form-control ${errors.title?'is-invalid':''}`,id:\"title\",name:\"title\",value:formData.title,onChange:handleChange,required:true,placeholder:\"Nom du document\"}),errors.title&&/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:errors.title[0]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"document_type\",className:\"form-label\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-tags me-2\"}),\"Type de document\",/*#__PURE__*/_jsx(\"small\",{className:\"text-muted ms-2\",children:\"(d\\xE9tect\\xE9 automatiquement)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-magic\"})}),/*#__PURE__*/_jsx(\"select\",{className:`form-select ${errors.document_type?'is-invalid':''}`,id:\"document_type\",name:\"document_type\",value:formData.document_type,onChange:handleChange,children:documentTypes.map(type=>/*#__PURE__*/_jsx(\"option\",{value:type.value,children:type.label},type.value))})]}),formData.file&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-text\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-info-circle me-1\"}),\"Type d\\xE9tect\\xE9 automatiquement bas\\xE9 sur l'extension du fichier. Vous pouvez le modifier si n\\xE9cessaire.\"]}),errors.document_type&&/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:errors.document_type[0]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"description\",className:\"form-label\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-align-left me-2\"}),\"Description\"]}),/*#__PURE__*/_jsx(\"textarea\",{className:`form-control ${errors.description?'is-invalid':''}`,id:\"description\",name:\"description\",value:formData.description,onChange:handleChange,rows:\"3\",placeholder:\"Description du document (optionnel)\"}),errors.description&&/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:errors.description[0]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-info\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user-shield me-2\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"Ajout administrateur :\"}),\" Ce document sera ajout\\xE9 \\xE0 la biblioth\\xE8que partag\\xE9e et visible par tous les utilisateurs.\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:onClose,disabled:loading,children:\"Annuler\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success\",disabled:loading||!formData.file,children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm me-2\",role:\"status\"}),\"Upload...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-upload me-2\"}),\"Ajouter\"]})})]})]})]})})});};export default DocumentUpload;","map":{"version":3,"names":["React","useState","documentService","useApp","getUserPermissions","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DocumentUpload","_ref","onClose","onSuccess","formData","setFormData","title","description","document_type","file","is_public","loading","setLoading","errors","setErrors","dragActive","setDragActive","state","actions","userPermissions","user","documentTypes","value","label","detectFileType","fileName","extension","toLowerCase","split","pop","includes","handleChange","e","name","files","target","detectedType","handleDrag","preventDefault","stopPropagation","type","handleDrop","dataTransfer","handleSubmit","uploadData","FormData","append","response","uploadDocument","showNotification","document","err","className","tabIndex","style","backgroundColor","children","onClick","onSubmit","non_field_errors","onDragEnter","onDragLeave","onDragOver","onDrop","formatFileSize","size","onChange","accept","htmlFor","id","required","placeholder","map","rows","disabled","role"],"sources":["C:/Users/PC/Desktop/modifier/Gestion_bibliotheque/espace_client_app/frontend/src/components/DocumentUpload.js"],"sourcesContent":["import React, { useState } from 'react';\nimport documentService from '../services/documentService';\nimport { useApp } from '../contexts/AppContext';\nimport { getUserPermissions } from '../utils/permissions';\n\nconst DocumentUpload = ({ onClose, onSuccess }) => {\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    document_type: 'other',\n    file: null,\n    is_public: true  // Tous les documents sont publics par défaut\n  });\n  const [loading, setLoading] = useState(false);\n  const [errors, setErrors] = useState({});\n  const [dragActive, setDragActive] = useState(false);\n  const { state, actions } = useApp();\n\n  // Obtenir les permissions de l'utilisateur\n  const userPermissions = getUserPermissions(state.user);\n\n  const documentTypes = [\n    { value: 'pdf', label: 'PDF' },\n    { value: 'fiche', label: 'Fiche' },\n    { value: 'image', label: 'Image' },\n    { value: 'other', label: 'Autre' }\n  ];\n\n  // Fonction pour détecter automatiquement le type de fichier\n  const detectFileType = (fileName) => {\n    if (!fileName) return 'other';\n\n    const extension = fileName.toLowerCase().split('.').pop();\n\n    // Types d'images\n    if (['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp', 'svg', 'ico', 'tiff', 'tif'].includes(extension)) {\n      return 'image';\n    }\n\n    // Types PDF\n    if (extension === 'pdf') {\n      return 'pdf';\n    }\n\n    // Types de fiche (documents texte, tableurs et présentations)\n    if (['doc', 'docx', 'txt', 'rtf', 'odt', 'ppt', 'pptx', 'odp', 'xls', 'xlsx', 'csv', 'ods', 'xlsm', 'xlsb'].includes(extension)) {\n      return 'fiche';\n    }\n\n    // Par défaut\n    return 'other';\n  };\n\n  const handleChange = (e) => {\n    const { name, value, files } = e.target;\n\n    if (name === 'file') {\n      const file = files[0];\n      const detectedType = detectFileType(file?.name);\n      setFormData({\n        ...formData,\n        file: file,\n        title: formData.title || (file ? file.name.split('.')[0] : ''),\n        document_type: detectedType // Détection automatique du type\n      });\n    } else {\n      setFormData({\n        ...formData,\n        [name]: value\n      });\n    }\n\n    // Effacer l'erreur du champ modifié\n    if (errors[name]) {\n      setErrors({\n        ...errors,\n        [name]: ''\n      });\n    }\n  };\n\n  const handleDrag = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === 'dragenter' || e.type === 'dragover') {\n      setDragActive(true);\n    } else if (e.type === 'dragleave') {\n      setDragActive(false);\n    }\n  };\n\n  const handleDrop = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n      const file = e.dataTransfer.files[0];\n      const detectedType = detectFileType(file.name);\n      setFormData({\n        ...formData,\n        file: file,\n        title: formData.title || file.name.split('.')[0],\n        document_type: detectedType // Détection automatique du type\n      });\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setErrors({});\n\n    if (!formData.file) {\n      setErrors({ file: ['Veuillez sélectionner un fichier'] });\n      setLoading(false);\n      return;\n    }\n\n    try {\n      const uploadData = new FormData();\n      uploadData.append('title', formData.title);\n      uploadData.append('description', formData.description);\n      uploadData.append('document_type', formData.document_type);\n      uploadData.append('file', formData.file);\n\n      const response = await documentService.uploadDocument(uploadData);\n      actions.showNotification('success', 'Document uploadé avec succès', 'Succès');\n      onSuccess(response.document);\n    } catch (err) {\n      setErrors(err);\n      actions.showNotification('error', 'Erreur lors de l\\'upload du document', 'Erreur');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"modal show d-block\" tabIndex=\"-1\" style={{ backgroundColor: 'rgba(0,0,0,0.5)' }}>\n      <div className=\"modal-dialog modal-lg\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <h5 className=\"modal-title\">\n              <i className=\"fas fa-plus me-2\"></i>\n              Ajouter un document\n            </h5>\n            <button\n              type=\"button\"\n              className=\"btn-close\"\n              onClick={onClose}\n            ></button>\n          </div>\n\n          <form onSubmit={handleSubmit}>\n            <div className=\"modal-body\">\n              {errors.non_field_errors && (\n                <div className=\"alert alert-danger\">\n                  {errors.non_field_errors[0]}\n                </div>\n              )}\n\n              {/* File Upload */}\n              <div className=\"mb-3\">\n                <label className=\"form-label\">\n                  <i className=\"fas fa-file me-2\"></i>\n                  Fichier *\n                </label>\n                <div\n                  className={`border rounded p-4 text-center ${\n                    dragActive ? 'border-primary bg-light' : 'border-dashed'\n                  } ${errors.file ? 'border-danger' : ''}`}\n                  onDragEnter={handleDrag}\n                  onDragLeave={handleDrag}\n                  onDragOver={handleDrag}\n                  onDrop={handleDrop}\n                >\n                  {formData.file ? (\n                    <div>\n                      <i className=\"fas fa-file-check fa-2x text-success mb-2\"></i>\n                      <p className=\"mb-0\">{formData.file.name}</p>\n                      <small className=\"text-muted\">\n                        {documentService.formatFileSize(formData.file.size)}\n                      </small>\n                    </div>\n                  ) : (\n                    <div>\n                      <i className=\"fas fa-cloud-upload-alt fa-2x text-muted mb-2\"></i>\n                      <p className=\"mb-2\">Glissez-déposez votre fichier ici ou</p>\n                      <input\n                        type=\"file\"\n                        className=\"form-control\"\n                        name=\"file\"\n                        onChange={handleChange}\n                        accept=\".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png,.gif\"\n                      />\n                    </div>\n                  )}\n                </div>\n                {errors.file && (\n                  <div className=\"text-danger small mt-1\">\n                    {errors.file[0]}\n                  </div>\n                )}\n              </div>\n\n              {/* Title */}\n              <div className=\"mb-3\">\n                <label htmlFor=\"title\" className=\"form-label\">\n                  <i className=\"fas fa-heading me-2\"></i>\n                  Titre *\n                </label>\n                <input\n                  type=\"text\"\n                  className={`form-control ${errors.title ? 'is-invalid' : ''}`}\n                  id=\"title\"\n                  name=\"title\"\n                  value={formData.title}\n                  onChange={handleChange}\n                  required\n                  placeholder=\"Nom du document\"\n                />\n                {errors.title && (\n                  <div className=\"invalid-feedback\">\n                    {errors.title[0]}\n                  </div>\n                )}\n              </div>\n\n              {/* Document Type - Détecté automatiquement */}\n              <div className=\"mb-3\">\n                <label htmlFor=\"document_type\" className=\"form-label\">\n                  <i className=\"fas fa-tags me-2\"></i>\n                  Type de document\n                  <small className=\"text-muted ms-2\">(détecté automatiquement)</small>\n                </label>\n                <div className=\"input-group\">\n                  <span className=\"input-group-text\">\n                    <i className=\"fas fa-magic\"></i>\n                  </span>\n                  <select\n                    className={`form-select ${errors.document_type ? 'is-invalid' : ''}`}\n                    id=\"document_type\"\n                    name=\"document_type\"\n                    value={formData.document_type}\n                    onChange={handleChange}\n                  >\n                    {documentTypes.map((type) => (\n                      <option key={type.value} value={type.value}>\n                        {type.label}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n                {formData.file && (\n                  <div className=\"form-text\">\n                    <i className=\"fas fa-info-circle me-1\"></i>\n                    Type détecté automatiquement basé sur l'extension du fichier. Vous pouvez le modifier si nécessaire.\n                  </div>\n                )}\n                {errors.document_type && (\n                  <div className=\"invalid-feedback\">\n                    {errors.document_type[0]}\n                  </div>\n                )}\n              </div>\n\n              {/* Description */}\n              <div className=\"mb-3\">\n                <label htmlFor=\"description\" className=\"form-label\">\n                  <i className=\"fas fa-align-left me-2\"></i>\n                  Description\n                </label>\n                <textarea\n                  className={`form-control ${errors.description ? 'is-invalid' : ''}`}\n                  id=\"description\"\n                  name=\"description\"\n                  value={formData.description}\n                  onChange={handleChange}\n                  rows=\"3\"\n                  placeholder=\"Description du document (optionnel)\"\n                ></textarea>\n                {errors.description && (\n                  <div className=\"invalid-feedback\">\n                    {errors.description[0]}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* Information sur le partage */}\n            <div className=\"alert alert-info\">\n              <i className=\"fas fa-user-shield me-2\"></i>\n              <strong>Ajout administrateur :</strong> Ce document sera ajouté à la bibliothèque partagée et visible par tous les utilisateurs.\n            </div>\n\n            <div className=\"modal-footer\">\n              <button\n                type=\"button\"\n                className=\"btn btn-secondary\"\n                onClick={onClose}\n                disabled={loading}\n              >\n                Annuler\n              </button>\n              <button\n                type=\"submit\"\n                className=\"btn btn-success\"\n                disabled={loading || !formData.file}\n              >\n                {loading ? (\n                  <>\n                    <span className=\"spinner-border spinner-border-sm me-2\" role=\"status\"></span>\n                    Upload...\n                  </>\n                ) : (\n                  <>\n                    <i className=\"fas fa-upload me-2\"></i>\n                    Ajouter\n                  </>\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DocumentUpload;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}