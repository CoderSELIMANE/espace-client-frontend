{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC\\\\Desktop\\\\modifier\\\\Gestion_bibliotheque\\\\espace_client_app\\\\frontend\\\\src\\\\pages\\\\Dashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport authService from '../services/authService';\nimport documentService from '../services/documentService';\nimport ModernDocumentList from '../components/ModernDocumentList';\nimport DocumentUpload from '../components/DocumentUpload';\nimport SearchAndFilter from '../components/SearchAndFilter';\nimport SkeletonLoader from '../components/SkeletonLoader';\nimport Pagination from '../components/Pagination';\nimport HeroSection from '../components/HeroSection';\nimport ModernNavbar from '../components/ModernNavbar';\nimport FloatingActionButton from '../components/FloatingActionButton';\nimport SimpleDocumentViewer from '../components/SimpleDocumentViewer';\nimport usePagination from '../hooks/usePagination';\nimport { useApp } from '../contexts/AppContext';\nimport { getUserPermissions } from '../utils/permissions';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Dashboard = () => {\n  _s();\n  const [showUpload, setShowUpload] = useState(false);\n  const [showAdvancedStats, setShowAdvancedStats] = useState(false);\n  const [viewingDocument, setViewingDocument] = useState(null);\n  const navigate = useNavigate();\n  const {\n    state,\n    actions\n  } = useApp();\n\n  // Obtenir les permissions de l'utilisateur\n  const userPermissions = getUserPermissions(state.user);\n\n  // Get filtered documents\n  const filteredDocuments = actions.getFilteredDocuments();\n\n  // Pagination\n  const {\n    currentPage,\n    totalPages,\n    itemsPerPage,\n    paginatedData,\n    totalItems,\n    goToPage,\n    changeItemsPerPage\n  } = usePagination(filteredDocuments, 6);\n  useEffect(() => {\n    // V√©rifier l'authentification\n    if (!authService.isAuthenticated()) {\n      navigate('/login');\n      return;\n    }\n    loadUserData();\n    loadDocuments();\n  }, [navigate]);\n\n  // Log de debug pour voir combien de documents sont re√ßus\n  useEffect(() => {\n    console.log('üìä Documents Dashboard:', {\n      total: state.documents.length,\n      filtered: filteredDocuments.length,\n      paginated: paginatedData.length,\n      currentPage: currentPage,\n      totalPages: totalPages,\n      itemsPerPage: itemsPerPage\n    });\n  }, [state.documents, filteredDocuments, paginatedData, currentPage, totalPages, itemsPerPage]);\n  const loadUserData = async () => {\n    try {\n      actions.setLoading(true);\n      const userData = await authService.getProfile();\n      actions.setUser(userData);\n    } catch (err) {\n      console.error('Erreur lors du chargement du profil:', err);\n      actions.showNotification('error', 'Erreur lors du chargement du profil');\n    } finally {\n      actions.setLoading(false);\n    }\n  };\n  const loadDocuments = async () => {\n    try {\n      console.log('üîÑ D√©but du chargement des documents...');\n      actions.setLoading(true);\n      const documentsData = await documentService.getDocuments();\n      console.log('üìä Donn√©es re√ßues du serveur:', documentsData);\n      const documents = documentsData.results || documentsData;\n      console.log('üìã Documents √† d√©finir:', documents);\n      actions.setDocuments(documents);\n      console.log('‚úÖ Documents d√©finis dans le contexte');\n    } catch (err) {\n      console.error('‚ùå Erreur lors du chargement des documents:', err);\n      actions.showNotification('error', 'Erreur lors du chargement des documents');\n    } finally {\n      actions.setLoading(false);\n    }\n  };\n  const handleLogout = () => {\n    authService.logout();\n  };\n  const handleUploadSuccess = async document => {\n    console.log('üìÑ Document ajout√© avec succ√®s:', document);\n    setShowUpload(false);\n    actions.showNotification('success', 'Document ajout√© avec succ√®s !');\n\n    // Solution √©l√©gante : redirection vers la m√™me page pour forcer le rechargement\n    console.log('üîÑ Redirection vers dashboard pour synchronisation...');\n    navigate('/dashboard', {\n      replace: true\n    });\n\n    // Forcer le rechargement des donn√©es apr√®s la navigation\n    setTimeout(() => {\n      loadDocuments();\n    }, 100);\n  };\n  const openDocumentInNewTab = document => {\n    const token = localStorage.getItem('access_token');\n    const previewUrl = `http://localhost:8000/documents/${document.id}/preview/?token=${token}`;\n    console.log(`üîó Ouverture dans nouvel onglet - Type: ${document.document_type}, URL: ${previewUrl}`);\n    try {\n      // Ouvrir dans un nouvel onglet avec des param√®tres sp√©cifiques\n      const newWindow = window.open(previewUrl, '_blank', 'noopener,noreferrer,width=1200,height=800');\n\n      // V√©rifier si la fen√™tre s'est ouverte (peut √™tre bloqu√©e par le navigateur)\n      if (!newWindow || newWindow.closed || typeof newWindow.closed === 'undefined') {\n        console.warn('‚ö†Ô∏è Popup bloqu√©e par le navigateur');\n\n        // Fallback : cr√©er un lien temporaire et le cliquer\n        const link = document.createElement('a');\n        link.href = previewUrl;\n        link.target = '_blank';\n        link.rel = 'noopener noreferrer';\n        link.style.display = 'none';\n\n        // Ajouter au DOM, cliquer, puis supprimer\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        console.log('‚úÖ Fallback avec lien temporaire ex√©cut√©');\n      } else {\n        console.log('‚úÖ Nouvel onglet ouvert avec succ√®s');\n      }\n    } catch (error) {\n      console.error('‚ùå Erreur lors de l\\'ouverture:', error);\n\n      // Fallback final : cr√©er un lien temporaire\n      const link = document.createElement('a');\n      link.href = previewUrl;\n      link.target = '_blank';\n      link.rel = 'noopener noreferrer';\n      link.style.display = 'none';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      console.log('‚úÖ Fallback final avec lien temporaire ex√©cut√©');\n    }\n  };\n  const handleViewDocument = document => {\n    // Pour les documents de type \"fiche\" et \"autre\", ouvrir dans un nouvel onglet\n    if (document.document_type === 'fiche' || document.document_type === 'other') {\n      openDocumentInNewTab(document);\n      return;\n    }\n\n    // Pour les autres types (PDF, images), utiliser le visualiseur modal\n    console.log(`üìã Ouverture dans visualiseur modal - Type: ${document.document_type}`);\n    setViewingDocument(document);\n  };\n  const handleCloseViewer = () => {\n    setViewingDocument(null);\n  };\n  const handleDeleteDocument = async documentId => {\n    try {\n      await documentService.deleteDocument(documentId);\n      actions.removeDocument(documentId);\n      // Recharger les documents pour s'assurer de la synchronisation\n      await loadDocuments();\n      actions.showNotification('success', 'Document supprim√© avec succ√®s !');\n    } catch (err) {\n      console.error('Erreur lors de la suppression:', err);\n      actions.showNotification('error', 'Erreur lors de la suppression du document');\n      throw err;\n    }\n  };\n  const handleUpdateDocument = async () => {\n    // Recharger les documents apr√®s une modification\n    await loadDocuments();\n  };\n  if (state.loading && !state.user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-center align-items-center min-vh-100\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner-border text-primary\",\n        role: \"status\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"visually-hidden\",\n          children: \"Chargement...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-vh-100\",\n    children: [/*#__PURE__*/_jsxDEV(ModernNavbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(HeroSection, {\n      user: state.user\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container py-4\",\n      children: [/*#__PURE__*/_jsxDEV(SearchAndFilter, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row mb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-content-between align-items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"enhanced-title\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-book-open me-2 text-primary\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 17\n              }, this), \"Biblioth\\xE8que Partag\\xE9e\", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"badge bg-primary ms-2 enhanced-badge\",\n                children: totalItems\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 17\n              }, this), state.documents.length !== totalItems && /*#__PURE__*/_jsxDEV(\"small\", {\n                className: \"text-muted ms-2\",\n                children: [\"(sur \", state.documents.length, \" total)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 15\n            }, this), userPermissions.canAdd && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-success enhanced-btn\",\n              onClick: () => setShowUpload(true),\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-plus me-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 19\n              }, this), \"Ajouter un document\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this), showUpload && userPermissions.canAdd && /*#__PURE__*/_jsxDEV(DocumentUpload, {\n        onClose: () => setShowUpload(false),\n        onSuccess: handleUploadSuccess\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12\",\n          children: state.loading ? /*#__PURE__*/_jsxDEV(SkeletonLoader, {\n            count: 6\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(ModernDocumentList, {\n              documents: paginatedData,\n              onDelete: handleDeleteDocument,\n              onUpdate: handleUpdateDocument,\n              onView: handleViewDocument\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 17\n            }, this), totalItems > 6 && /*#__PURE__*/_jsxDEV(Pagination, {\n              currentPage: currentPage,\n              totalPages: totalPages,\n              totalItems: totalItems,\n              itemsPerPage: itemsPerPage,\n              onPageChange: goToPage,\n              onItemsPerPageChange: changeItemsPerPage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this), userPermissions.canAdd && /*#__PURE__*/_jsxDEV(FloatingActionButton, {\n        onClick: () => setShowUpload(true),\n        icon: \"fas fa-plus\",\n        tooltip: \"Ajouter un document\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 11\n      }, this), viewingDocument && /*#__PURE__*/_jsxDEV(SimpleDocumentViewer, {\n        document: viewingDocument,\n        onClose: handleCloseViewer\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 216,\n    columnNumber: 5\n  }, this);\n};\n_s(Dashboard, \"RpcUTSvukqECEFDYOC1K4+PvAcs=\", false, function () {\n  return [useNavigate, useApp, usePagination];\n});\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","authService","documentService","ModernDocumentList","DocumentUpload","SearchAndFilter","SkeletonLoader","Pagination","HeroSection","ModernNavbar","FloatingActionButton","SimpleDocumentViewer","usePagination","useApp","getUserPermissions","jsxDEV","_jsxDEV","Fragment","_Fragment","Dashboard","_s","showUpload","setShowUpload","showAdvancedStats","setShowAdvancedStats","viewingDocument","setViewingDocument","navigate","state","actions","userPermissions","user","filteredDocuments","getFilteredDocuments","currentPage","totalPages","itemsPerPage","paginatedData","totalItems","goToPage","changeItemsPerPage","isAuthenticated","loadUserData","loadDocuments","console","log","total","documents","length","filtered","paginated","setLoading","userData","getProfile","setUser","err","error","showNotification","documentsData","getDocuments","results","setDocuments","handleLogout","logout","handleUploadSuccess","document","replace","setTimeout","openDocumentInNewTab","token","localStorage","getItem","previewUrl","id","document_type","newWindow","window","open","closed","warn","link","createElement","href","target","rel","style","display","body","appendChild","click","removeChild","handleViewDocument","handleCloseViewer","handleDeleteDocument","documentId","deleteDocument","removeDocument","handleUpdateDocument","loading","className","children","role","fileName","_jsxFileName","lineNumber","columnNumber","canAdd","onClick","onClose","onSuccess","count","onDelete","onUpdate","onView","onPageChange","onItemsPerPageChange","icon","tooltip","_c","$RefreshReg$"],"sources":["C:/Users/PC/Desktop/modifier/Gestion_bibliotheque/espace_client_app/frontend/src/pages/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport authService from '../services/authService';\nimport documentService from '../services/documentService';\nimport ModernDocumentList from '../components/ModernDocumentList';\nimport DocumentUpload from '../components/DocumentUpload';\nimport SearchAndFilter from '../components/SearchAndFilter';\n\n\nimport SkeletonLoader from '../components/SkeletonLoader';\nimport Pagination from '../components/Pagination';\nimport HeroSection from '../components/HeroSection';\nimport ModernNavbar from '../components/ModernNavbar';\nimport FloatingActionButton from '../components/FloatingActionButton';\n\nimport SimpleDocumentViewer from '../components/SimpleDocumentViewer';\n\nimport usePagination from '../hooks/usePagination';\nimport { useApp } from '../contexts/AppContext';\nimport { getUserPermissions } from '../utils/permissions';\n\n\nconst Dashboard = () => {\n  const [showUpload, setShowUpload] = useState(false);\n  const [showAdvancedStats, setShowAdvancedStats] = useState(false);\n  const [viewingDocument, setViewingDocument] = useState(null);\n  const navigate = useNavigate();\n  const { state, actions } = useApp();\n\n  // Obtenir les permissions de l'utilisateur\n  const userPermissions = getUserPermissions(state.user);\n\n  // Get filtered documents\n  const filteredDocuments = actions.getFilteredDocuments();\n\n  // Pagination\n  const {\n    currentPage,\n    totalPages,\n    itemsPerPage,\n    paginatedData,\n    totalItems,\n    goToPage,\n    changeItemsPerPage\n  } = usePagination(filteredDocuments, 6);\n\n  useEffect(() => {\n    // V√©rifier l'authentification\n    if (!authService.isAuthenticated()) {\n      navigate('/login');\n      return;\n    }\n\n    loadUserData();\n    loadDocuments();\n  }, [navigate]);\n\n  // Log de debug pour voir combien de documents sont re√ßus\n  useEffect(() => {\n    console.log('üìä Documents Dashboard:', {\n      total: state.documents.length,\n      filtered: filteredDocuments.length,\n      paginated: paginatedData.length,\n      currentPage: currentPage,\n      totalPages: totalPages,\n      itemsPerPage: itemsPerPage\n    });\n  }, [state.documents, filteredDocuments, paginatedData, currentPage, totalPages, itemsPerPage]);\n\n  const loadUserData = async () => {\n    try {\n      actions.setLoading(true);\n      const userData = await authService.getProfile();\n      actions.setUser(userData);\n    } catch (err) {\n      console.error('Erreur lors du chargement du profil:', err);\n      actions.showNotification('error', 'Erreur lors du chargement du profil');\n    } finally {\n      actions.setLoading(false);\n    }\n  };\n\n  const loadDocuments = async () => {\n    try {\n      console.log('üîÑ D√©but du chargement des documents...');\n      actions.setLoading(true);\n      const documentsData = await documentService.getDocuments();\n      console.log('üìä Donn√©es re√ßues du serveur:', documentsData);\n      const documents = documentsData.results || documentsData;\n      console.log('üìã Documents √† d√©finir:', documents);\n      actions.setDocuments(documents);\n      console.log('‚úÖ Documents d√©finis dans le contexte');\n    } catch (err) {\n      console.error('‚ùå Erreur lors du chargement des documents:', err);\n      actions.showNotification('error', 'Erreur lors du chargement des documents');\n    } finally {\n      actions.setLoading(false);\n    }\n  };\n\n  const handleLogout = () => {\n    authService.logout();\n  };\n\n  const handleUploadSuccess = async (document) => {\n    console.log('üìÑ Document ajout√© avec succ√®s:', document);\n    setShowUpload(false);\n    actions.showNotification('success', 'Document ajout√© avec succ√®s !');\n\n    // Solution √©l√©gante : redirection vers la m√™me page pour forcer le rechargement\n    console.log('üîÑ Redirection vers dashboard pour synchronisation...');\n    navigate('/dashboard', { replace: true });\n\n    // Forcer le rechargement des donn√©es apr√®s la navigation\n    setTimeout(() => {\n      loadDocuments();\n    }, 100);\n  };\n\n  const openDocumentInNewTab = (document) => {\n    const token = localStorage.getItem('access_token');\n    const previewUrl = `http://localhost:8000/documents/${document.id}/preview/?token=${token}`;\n\n    console.log(`üîó Ouverture dans nouvel onglet - Type: ${document.document_type}, URL: ${previewUrl}`);\n\n    try {\n      // Ouvrir dans un nouvel onglet avec des param√®tres sp√©cifiques\n      const newWindow = window.open(previewUrl, '_blank', 'noopener,noreferrer,width=1200,height=800');\n\n      // V√©rifier si la fen√™tre s'est ouverte (peut √™tre bloqu√©e par le navigateur)\n      if (!newWindow || newWindow.closed || typeof newWindow.closed === 'undefined') {\n        console.warn('‚ö†Ô∏è Popup bloqu√©e par le navigateur');\n\n        // Fallback : cr√©er un lien temporaire et le cliquer\n        const link = document.createElement('a');\n        link.href = previewUrl;\n        link.target = '_blank';\n        link.rel = 'noopener noreferrer';\n        link.style.display = 'none';\n\n        // Ajouter au DOM, cliquer, puis supprimer\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n\n        console.log('‚úÖ Fallback avec lien temporaire ex√©cut√©');\n      } else {\n        console.log('‚úÖ Nouvel onglet ouvert avec succ√®s');\n      }\n    } catch (error) {\n      console.error('‚ùå Erreur lors de l\\'ouverture:', error);\n\n      // Fallback final : cr√©er un lien temporaire\n      const link = document.createElement('a');\n      link.href = previewUrl;\n      link.target = '_blank';\n      link.rel = 'noopener noreferrer';\n      link.style.display = 'none';\n\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n\n      console.log('‚úÖ Fallback final avec lien temporaire ex√©cut√©');\n    }\n  };\n\n  const handleViewDocument = (document) => {\n    // Pour les documents de type \"fiche\" et \"autre\", ouvrir dans un nouvel onglet\n    if (document.document_type === 'fiche' || document.document_type === 'other') {\n      openDocumentInNewTab(document);\n      return;\n    }\n\n    // Pour les autres types (PDF, images), utiliser le visualiseur modal\n    console.log(`üìã Ouverture dans visualiseur modal - Type: ${document.document_type}`);\n    setViewingDocument(document);\n  };\n\n  const handleCloseViewer = () => {\n    setViewingDocument(null);\n  };\n\n  const handleDeleteDocument = async (documentId) => {\n    try {\n      await documentService.deleteDocument(documentId);\n      actions.removeDocument(documentId);\n      // Recharger les documents pour s'assurer de la synchronisation\n      await loadDocuments();\n      actions.showNotification('success', 'Document supprim√© avec succ√®s !');\n    } catch (err) {\n      console.error('Erreur lors de la suppression:', err);\n      actions.showNotification('error', 'Erreur lors de la suppression du document');\n      throw err;\n    }\n  };\n\n  const handleUpdateDocument = async () => {\n    // Recharger les documents apr√®s une modification\n    await loadDocuments();\n  };\n\n  if (state.loading && !state.user) {\n    return (\n      <div className=\"d-flex justify-content-center align-items-center min-vh-100\">\n        <div className=\"spinner-border text-primary\" role=\"status\">\n          <span className=\"visually-hidden\">Chargement...</span>\n        </div>\n      </div>\n    );\n  }\n\n\n\n  return (\n    <div className=\"min-vh-100\">\n      {/* Modern Navbar */}\n      <ModernNavbar />\n\n      {/* Hero Section */}\n      <HeroSection user={state.user} />\n\n      {/* Main Content */}\n      <div className=\"container py-4\">\n\n\n\n\n        {/* Search and Filter */}\n        <SearchAndFilter />\n\n\n\n        {/* Actions */}\n        <div className=\"row mb-4\">\n          <div className=\"col-12\">\n            <div className=\"d-flex justify-content-between align-items-center\">\n              <h2 className=\"enhanced-title\">\n                <i className=\"fas fa-book-open me-2 text-primary\"></i>\n                Biblioth√®que Partag√©e\n                <span className=\"badge bg-primary ms-2 enhanced-badge\">{totalItems}</span>\n                {state.documents.length !== totalItems && (\n                  <small className=\"text-muted ms-2\">\n                    (sur {state.documents.length} total)\n                  </small>\n                )}\n              </h2>\n\n              {userPermissions.canAdd && (\n                <button\n                  className=\"btn btn-success enhanced-btn\"\n                  onClick={() => setShowUpload(true)}\n                >\n                  <i className=\"fas fa-plus me-2\"></i>\n                  Ajouter un document\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Upload Modal - Seulement pour les admins */}\n        {showUpload && userPermissions.canAdd && (\n          <DocumentUpload\n            onClose={() => setShowUpload(false)}\n            onSuccess={handleUploadSuccess}\n          />\n        )}\n\n        {/* Documents List */}\n        <div className=\"row\">\n          <div className=\"col-12\">\n            {state.loading ? (\n              <SkeletonLoader count={6} />\n            ) : (\n              <>\n                <ModernDocumentList\n                  documents={paginatedData}\n                  onDelete={handleDeleteDocument}\n                  onUpdate={handleUpdateDocument}\n                  onView={handleViewDocument}\n                />\n\n                {/* Pagination */}\n                {totalItems > 6 && (\n                  <Pagination\n                    currentPage={currentPage}\n                    totalPages={totalPages}\n                    totalItems={totalItems}\n                    itemsPerPage={itemsPerPage}\n                    onPageChange={goToPage}\n                    onItemsPerPageChange={changeItemsPerPage}\n                  />\n                )}\n              </>\n            )}\n          </div>\n        </div>\n\n\n\n        {/* Floating Action Button - Seulement pour les admins */}\n        {userPermissions.canAdd && (\n          <FloatingActionButton\n            onClick={() => setShowUpload(true)}\n            icon=\"fas fa-plus\"\n            tooltip=\"Ajouter un document\"\n          />\n        )}\n\n        {/* Visualiseur de documents */}\n        {viewingDocument && (\n          <SimpleDocumentViewer\n            document={viewingDocument}\n            onClose={handleCloseViewer}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}